apply plugin: 'java'
apply plugin: 'maven'

group = 'com.codingchili'
version = '1.0-SNAPSHOT'
libsDirName = '../output'

description = """"""

sourceCompatibility = 1.8
targetCompatibility = 1.8

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}


jar {
    from {
        (configurations.runtime).collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    manifest {
        attributes 'Implementation-Title' : 'chili-core',
        'Implementation-Version': version,
        'Main-Class': 'com.codingchili.core.Launcher'
    }
}

repositories {       
    jcenter { url "http://jcenter.bintray.com/" }
     maven { url "http://repo.maven.apache.org/maven2" }
}

sourceSets {
    integrationTest {
        java {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/integration-test/java')
        }
        resources.srcDir file('src/integration-test/resources')
    }
}

dependencies {
    compile group: 'junit', name: 'junit', version:'4.12'
    compile group: 'io.vertx', name: 'vertx-core', version:'3.3.3'
    compile group: 'io.vertx', name: 'vertx-unit', version:'3.3.3'
    compile group: 'io.vertx', name: 'vertx-web', version:'3.3.3'
    compile group: 'io.vertx', name: 'vertx-hazelcast', version:'3.3.3'
    compile group: 'io.vertx', name: 'vertx-mongo-client', version:'3.3.3'
    compile group: 'io.vertx', name: 'vertx-dropwizard-metrics', version:'3.3.3'
    compile group: 'org.fusesource.jansi', name: 'jansi', version:'1.14'

    // the following dependencies are about 25MB in size..
    compile group: 'org.elasticsearch.client', name: 'transport', version:'5.0.2'
}